<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Mia: Stereo SLAM</title>
    <link href="css/bootstrap.min.css" rel="stylesheet"/>
  </head>
  <body>
    <script type="text/x-creole-wiki" id="report">
== Introduction
Mia is a Stereo Vision System that could run at synchronized at a high speed.

== Camera to Points
In the following chapter we describe how the image is processed, and how the 3D feature is factored.

=== Hardware Hacking
The weakness of multi camera system usually comes from the time gaps between devices. To resolve it, and to provide faster and more accurate triangulation, we followed the instruction in [1] to hack the PS3Eye, which is originally used as game augment reality. We connect one FSIN with VSYN, force the A2D chip samples together. We also have corresponding software architecture to prevent loss of packets. 

At the end, we have a synchronized stereo system at 120 fps, 320x240px.

{{ img/mia_buttom.jpg | Mia buttom view~||width=40%}}

=== The Third Eye
We want to render 3D object or map on the run. However, the stereo system, which outputed with YUYV format, already occupied 26MB/s. The upper bound of USB2.0 is 35MB/s. So, if we want a nice canvas, we have to choose a compressed source of video stream.

We use Logitech C920, which has a hardware H.264 compressor. It will work well on a not so violent environment. FFMpeg is utilized to transform the V4L payload to YUV data.

=== Calibration
Calibration is the heart of stereo system. If it was bad, the traingulation could diverse. We first to the stereo calibration by chessboard, and calculation the reprojection error. Then we do this to the HD camera alone, and estimate the pose of it by prior and chessboard.

{{ img/chessboard.jpg | Chessboards ~||width=40%}}

=== From Image to 3D points
Stereo input was processed by FAST corner test and ORB feature descriptor. No pyramid is used. It is quick enough to detect double images 100fps, and generate 20 best fetures. Then we maches the left and right descriptors with hamming loss by brute force.

However, the match pair may still be wrong. We conduct a Fundmental Matrix filtering on the undistorted pair of features, which elimates all that with \(|p^TFp^\prime|\) > threshold.

Then each pair is sent to do trianglulation. Each point could be seen as a ray from the focus, and we could also find the point with minimum sum of distance to the two rays. The point is treated as the 3D location of the feature.

== Simutaneously Localization and Mapping


=== Extended Kalman Filter

=== Derivative Derivation

=== Matching

== Screenshots
{{ img/screenshot.png| Screenshot ~||width=40%}}

== Open Source
The whole source, including the report, is open sourced (by us) and you can do download it on internet.

* [[https://github.com/xflash96/mia | Mia: Stereo Vision System]]

== Reference
* [1] [[http://nuigroup.com/forums/viewthread/12445/ | PS3Eye hacks]]

    </script>
    
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Mia</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="#report">Report</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">
        <div id="content">
		<div class="row" id="wiki"></div>
	</div>
        <footer>
        <p>VFX 2012 Spring Final Project</p>
        </footer>
    </div> <!-- /container -->

    <!-- Le javascripts -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.5.3/modernizr.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.1/underscore-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.1/backbone-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.0.beta2/handlebars.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script src="js/jquery.form.min.js"></script>
    <script src="js/creole.js"></script>
    <script src="js/load-image.js"></script>
    <script src="js/bootstrap-carousel.js"></script>
    <script type="text/javascript" src="js/latexit.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
    <script type="text/javascript">
	(function(){
	    var getMarkup = function(data){
		var div = $('#wiki')[0];
       	        var creole = new Parse.Simple.Creole({
		    forIE: document.all,
	        });
		creole.parse(div, data);
		prettyPrint();
		LatexIT.render('span');
	    };
	    getMarkup($('#report').text());
	})();
    </script>
    <!-- Le debugs
    <meta http-equiv="cache-control" content="no-cache">
    -->

    <!-- Le styles -->
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet"/>
    <link href="css/prettify.css" rel="stylesheet"/>
    <!--
    <script src="/static/js/bootstrap-transition.js"></script>
    <script src="/static/js/bootstrap-tab.js"></script>
    <script src="/static/js/bootstrap-tooltip.js"></script>
    <script src="/static/js/bootstrap-popover.js"></script>
    <script src="/static/js/bootstrap-typeahead.js"></script>
    -->
    <a href="http://github.com/xflash96/mia"><img style="position: absolute; top: 40px; right: 0; border: 0;" src="https://a248.e.akamai.net/camo.github.com/abad93f42020b733148435e2cd92ce15c542d320/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub"></a>

  </body>
</html>
